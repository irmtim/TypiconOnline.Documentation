Устав
=====

Каждый храм (монастырь) имеет свои особенности богослужения, поэтому предполагается наличие множества Уставов для конкретных храмов или монастырей, которые должны основываться на одном из нескольких предустановленных Уставов (например: Полный, Монастырский, Приходской).

Устав представляет собой ключевой объект системы.
По термином "Устав" понимается совокупность особенностей расписания богослужений для конкретного храма или монастыря, а также настройки их внешнего отображения.

.. note:: В настоящее время система рассчитана на формирование расписания для храмов и монастырей, где богослужение совершается ежедневно.
 
Особенности богослужения складываются из ...

Правила Минеи
-------------

Исходя из этого в Уставе определяются особенности богослужений для каждого дня года - и называются они **Правилами Минеи**.
Правила Минеи бывают:

   * непереходящие
      определена дата (день и месяц).
	  Например: 1 января, 25 ноября и т.д.
   * переходящие
      дата не определена, вычисялется с помощью элементов правил.
      Например: Димитриевская родительская суббота, Неделя по Рождестве и т.д.
	  
Свойства
~~~~~~~~

	* **Тексты служб**
		Должна существовать возможность формировать данный список из любых Текстов служб Дней Минеи. Имеется в виду, что совсем не обязательно, чтобы даты Текстов служб Правила Минеи и Дня Минеи должны совпадать.

		.. note:: Как пример, существует практика переноса служб. Для определенного Устава данное Правило Минеи должно включать службы, допустим, с предыдущего дня, потому как в тот день совершается престольный праздник, когда формируется особенная последовательность богослужений.
		
	* **Шаблон**
		Ссылка на Знак службы
	* **Как дополнение**
		В большинстве случаев **Правило Минеи** не имеет собственного определения **Правила для последовательности** по той причине, что оно определено шаблоне - Знаке службы, на которое ссылается данное Правило.
		Если же у Правила Минеи, которое описывает богослужение календарного дня, имеются какие-либо особенности, то они отображаеются в поле **Правило для последовательности**. Часто бывает так, что нет необходимости переписывать все определение, но нужно лишь изменить, добавить или удалить некоторые элементы из **Правило для последовательности* Знака Службы.
		В таком случае полю **Как дополнение** нужно задать значение "Истина" (должно быть в нажатом состоянии).
		
		Особенности формирования Правил для последовательности "как дополнения" описываются **здесь** (добавить ссылку).
		 
	* **Дата**: день-месяц
		Хранится в формате --MM-dd
	* **Дата (високосный год)**: день-месяц
		Хранится в формате --MM-dd

		По поводу целесобразности хранения двух дат описано в Дне Минеи.

		В случае незаполнения обеих дат считаем Правило переходящим. В таком случае его использование в Расписании Устава должно определяться в Формальном определении Правила через Модифицированные Правила.
	* **Правило для переноса служб**
		Определение алгоритма для переноса данного Правила.
		Представляет собой xml-документ, описание элементов смотри **здесь** (добавить ссылку).
	* **Правило для последовательности**
		Определение особенностей расписания богослужений для данного Правила, а также последовательности этих богослужений.
		Представляет собой xml-документ, описание элементов смотри **здесь** (добавить ссылку).
		
		
Правила Триоди
--------------
	  
Для формирования особенностей богослужений, основанных на службах книги Триодь, используются **Правила Триоди**.
Для Правила Триоди определяется количество дней относительно дня празднования Пасхи. 
Например: Пасха (0 дней), Преполовение Пятидесятницы (24), Неделя о мытаре и фарисее (-70)

.. hint:: В Уставе не может быть определено более одного правила с одинаковым количеством дней относительно Пасхи 

Знаки службы
------------

В богослужебном уставе для каждой службы Минеи и Триоди имеется особый знак службы, имеющий определенные особенности совершения богослужения.
В системе также каждое **Правило Минеи** и **Правило Триоди** ссылается на **Знак службы**.
В свою очередь Знак службы также может ссылаться на другой Знак службы.

Общие правила
-------------

Явные правила
-------------
 
В итоге для каждого Устава должны быть определены особенности:

* каждого дня годового круга,
* дней пасхального круга,
* знаков служб

а также 