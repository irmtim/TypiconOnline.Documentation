Настройка календаря
-------------------

Анонс
~~~~~

Ниже мы разберем функционал раздела редактирования Устава под названием "Календарь".

Зачем он нужен?
~~~~~~~~~~~~~~~

Давайте начнем, как ни странно… с конца. Откроем сформированное расписание любого Устава, например, вот такое:

.. figure:: 1.png
	:width: 300 px
	:alt: Расписание

Каждый день имеет свое наименование и ниже - порядок богослужений. В настоящий момент нас с вами интересует наименование - ведь за это как раз и отвечает Календарь.

Чтобы было понятно, этот раздел отвечает на вопрос: КОМУ совершается богослужение в определенный день.

Как мы знаем, в реальной жизни на этот вопрос отвечают две богослужебные книги: Минея и Триодь. В первой содержатся службы календарного года: 1 января, 2 января и так далее, а также некоторые переходящие праздники. Во второй (Триоди) содержатся службы, даты которым назначаются относительной дня празднования Пасхи.

Мы пошли таким же путем, и в Календаре Устава есть два подраздела: Минея и Триодь.

Минея
~~~~~

В окне редактирования Устава нажмем на ссылку "Минея" в разделе "Календарь". Открылась страница с таблицей дней Минеи:

.. figure:: 2.png
	:width: 300 px
	:alt: Минея

Даже если Вы в первый раз зайдете на эту страницу только после создания Устава, вы уже увидите здесь множество заполненных элементов. Дело в том, что при создании Устава все дни Календаря копируются из шаблона, который был выбран при создании заявки.

Каждый календарный день Минеи (с 1 января по 31 декабря) имеет заполненные данные. Элементы этой таблицы, которые имеют дату, удаляться не могут - таково ограничение системы. Это объяснимо, ведь даже если мы в нашем графике богослужений укажем, что служба совершается только по воскресеньям, это значит, что воскресный день может попасть абсолютно на любой день календаря. Поэтому все дни Минеи на целый год должны иметь значения.

При настройке вашего Устава стоит пройтись по всем дням календаря и проверить соответствие вашей богослужебной традиции в сравнении с заполненными по умолчанию данными. К примеру, каждый храм имеет свой престольный праздник, каких-либо особо чтимых святых угодников Божиих, у отца настоятеля в конце концов есть день тезоименитства - все это должно правильным образом отображено в календаре. Будучи заполненным один раз, вы избавите себя думать об этом впоследствии - система будет формировать расписание из года в год на основании этих данных.

Давайте теперь перейдем в режим редактирования дня Минеи. Выбираем действие "Редактировать" напротив интересующего нас дня. Давайте выберем 3 января.

.. figure:: 3.png
	:width: 300 px
	:alt: Минея, редактирование дня

В открывшемся окне доступна следующая информация:

    1. Собственно дата - тут все понятно.
   
    2. Знак службы.
        Подробнее о знаках службы мы говорили в `этом <../../knowledge/signs.html>`_ уроке.
        Здесь можно его изменить. Для этого в открывающемся списке выбираем нужный нам знак службы (у каждого знака отображается его приоритет).
    
    3. Тексты служб.
        Это как раз то, что будет отображаться в расписании, о чем мы говорили в начале.
        В данном случае здесь не один, а два текста службы: предпразднество и память свт. Петра. Красный флажок обозначает признак Господского праздника, его предпразднества или попразднества.

        Тексты служб можно менять местами. Нажмите на текст службы и перетащите его ниже или выше, как вы хотите.
        Текст службы можно удалить из этого списка. Для этого нажмите на значок корзины справа.

        Можно добавить текст службы. Нажимаем на зеленую кнопку "Добавить". Открывается окно, где можно выбрать нужный нам текст службы. Поиск можно осуществить по календарику слева, чтобы добавить переходящие праздники, нажмите на синюю кнопку "Переходящие праздники".
        Текст службы  совсем не обязательно должен совпадать с датой редактируемого дня Минеи (3 января в нашем случае). Нередко на практике применяются переносы служб в связи, например, с престольным праздником храма. Это все можно настроить в вашем Устава так как вы этого хотите. Полная свобода.

        Минимальное количество текстов служб - 1, максимальное - 3.

    4. Правило для переноса служб.
        Здесь можно указать инструкцию, согласно которой этот день Минеи станет переходящим.
        Богослужебный устав изобилует исключениями и различными поправками, и есть случаи, когда какой-либо праздник необходимо перенести на день назад, например. Здесь это может быть описано и программа все поймет и выполнит.

        Это непростая тема, достойная отдельного разговора. Пока просто оставляем в этом поле как есть.

Внеся изменения, необходимо нажать на кнопку "Сохранить". Для того, чтобы изменения вступили в силу, необходимо будет опубликовать Устав, но вы уже это умеете)

Переходящие дни Минеи
"""""""""""""""""""""

Кроме дней Минеи, которые завязаны на определенную дату, существуют переходящие праздники. Дни их совершения каждый год разные, вот примеры: первое воскресенье определенного месяца, суббота накануне определенного праздника и так далее.

В общей таблице мы их найдем, как не имеющие дату.

.. figure:: 4.png
	:width: 300 px
	:alt: Переходящие дни Минеи

Перейдя в режим редактирования такого дня мы можем поменять для него Знак службы, а также правило для переноса.

.. figure:: 5.png
	:width: 300 px
	:alt: Переходящие дни Минеи, редактирование

В данном случае правило для переноса служб является обязательным для заполнения. Повторимся, подробнее об использовании этого инструмента будем говорить отдельно.

Если вы не обладаете техническими навыками, термин "xml" для вас ничего, кроме недоумения и ужаса не приносит, но вам необходимо добавить такой переходящий день, обратитесь в тех. поддержку к нам. Мы вам поможем и все настроим.

Добавление дня Минеи
""""""""""""""""""""

При отображении таблицы всех дней Минеи мы с вами видели кнопку "Добавить переходящий праздник".

Если у вас в храме совершается переходящий праздник, которого еще нет в Календаре вашего Устава, то вам сюда - нажимаем на кнопку, выбираем текст службы, который станет переходящим днем Минеи. 
Далее назначаем знак службы и определяем правило для переноса. Если вы не знаете как это делать, то тогда остается два варианта: не делать этого или обратиться к нам, мы поможем и все настроим.

Удаление переходящего дня Минеи
"""""""""""""""""""""""""""""""

Переходящий день Минеи можно удалить. Находим нужный день, в действиях выбираем "Удалить".

Изменения всегда можно отменить, также как и любые изменения.

Триодь
~~~~~~

С Триодью ситуация аналогичная. Вместо даты здесь указывается количество дней относительно Пасхи, как мы это видим в таблице.

.. figure:: 6.png
	:width: 300 px
	:alt: Триодь

У некоторых элементов поле "Наименование" отмечено курсивом. Это значит, что у дня Триоди отсутствует наименование, а то что мы видим - информация для нашего понимания. Ведь не всегда сходу поймешь, что значит -11 дней от Пасхи. А прочитав "Седмица 6-ая Великого поста, среда", все становится понятно.

Перейдем в режим редактирования дня.

.. figure:: 7.png
	:width: 300 px
	:alt: Триодь, редактирование дня

Что мы видим:

    1. Дней от Пасхи. 
        Количество дней относительно празднования Пасхи. Просто для информации, чтобы мы не забыли, какой день мы редактируем.
	
    2. Знак службы. Все так же как с днями Минеи.
        
    3. "Прозрачность".
            Если перевести его во "включенное" состояние, то при формировании расписания, если на один день придутся и Минейный и Триодный календарный день, то в качестве главного всегда будет выбран Минейный.
	
    4. Текст службы.
        Можно изменить текст службы, приходящийся на этот день Триоди. Бывают для этого причины. 
        Например, на 2-ую Неделю по Пятидесятнице приходится множество праздников: и день всех русских святых, и всех афонских. В Николо-Берлюковском монастыре в этот день совершается празднование иконы "Лобзание Иисуса Христа Иудою". Все эти праздники вместе служить не получится. Но если очень хочется, то можно их перенести на близлежащие дни. Также можно поступать в ваших конкретных случаях. Если на это благословит настоятель конечно.
	
Добавление дня Триоди
"""""""""""""""""""""
	
Можно также добавить день Триоди. На странице, где располагается таблица со всеми днями Триоди, нажимаем на "Добавить праздник Триоди". Из списка выбираем необходимый нам день относительно Пасхи. Далее все также как и в режиме редактирования.

Удаление дня Триоди
"""""""""""""""""""

Все осуществляется в таком же режиме, как и с переходящими днями Минеи. 
