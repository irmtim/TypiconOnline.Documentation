

<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Уставщик &mdash; документация Typicon.Online 0.1</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Typicon.Online
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Введение</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#id4">Богослужебные тексты</a></li>
<li class="toctree-l1"><a class="reference internal" href="typesetter/index.html">Редактор текстов</a></li>
<li class="toctree-l1"><a class="reference internal" href="typesetter/dayschema.html">Правила набора богослужебных текстов</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Руководства</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/01-simple-creation.html">Простой - создание</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Часто задаваемые вопросы</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Typicon.Online</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Уставщик</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/editor.rst.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Уставщик<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<div class="section" id="id2">
<h2>Описание<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p>Роль пользователя в системе Типикон.онлайн
Позволяет выполнять следующие задачи:</p>
<ul class="simple">
<li><p>Подача заявки на создание нового Устава</p></li>
<li><p>Редактирование свойств Устава</p></li>
<li><p>Добавление/удаление Редакторов Устава</p></li>
<li><p>Публикация Устава</p></li>
</ul>
</div>
<div class="section" id="id3">
<h2>Подача заявки на создание нового Устава<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id4">
<h3>Права доступа<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика и Администратора</p>
</div>
<div class="section" id="id5">
<h3>Условия<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для зарегистрированного пользователя</p>
</div>
<div class="section" id="id6">
<h3>Алгоритм<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h3>
<ol class="arabic">
<li><p>Пользователь выбирает раздел меню «Уставщик - Уставы».</p></li>
<li><p>В открывшемся окне Пользователь выбирает действие «Создать новый Устав»</p></li>
<li><dl>
<dt>В открывшемся окне заполняются поля:</dt><dd><ol class="loweralpha">
<li><dl class="simple">
<dt>Наименование (обязательно)</dt><dd><p>Отображающееся Имя Устава (многоязычное)</p>
</dd>
</dl>
</li>
<li><dl>
<dt>Системное имя (обязательно)</dt><dd><p>Уникальное в рамках системы имя для Устава, по которому будет осуществляться доступ к расписанию для внешних систем</p>
<div class="admonition attention">
<p class="admonition-title">Внимание</p>
<p>Поле <strong>Системное имя</strong> заполняется единожды. После утверждения Заявки редактирование недоступно.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Описание (обязательно)</dt><dd><p>Описание Устава (многоязычное), более подробно описывающее Устав</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Шаблон (обязательно)</dt><dd><p>Устав, который будет взят для основы при создании черновика создаваемого Устава</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Язык по умолчанию (обязательно)</dt><dd><p>Язык по умолчанию при отображении расписания</p>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
</li>
<li><p>Пользователь выбирает действие «Создать Устав».</p></li>
<li><p>Создается Заявка на создание Устава со статусом «Ожидает утверждения».</p></li>
<li><p>Система возвращает сообщение об успешном завершении процесса.</p></li>
<li><p>В случае каких-либо ошибок, система возвращает сообщение об ошибке.</p></li>
</ol>
<p>Для получения доступа к редактированию свойств Устава заявка должна быть утверждена Администратором системы.</p>
</div>
</div>
<div class="section" id="id7">
<h2>Удаление Заявки на создание Устава<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id8">
<h3>Права доступа<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика (владельца Заявки) и Администратора</p>
</div>
<div class="section" id="id9">
<h3>Условия<a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h3>
<dl class="simple">
<dt>Доступно для Заявки со статусами:</dt><dd><ul class="simple">
<li><p>Ожидает утверждения</p></li>
<li><p>Отклонена</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="id10">
<h3>Алгоритм<a class="headerlink" href="#id10" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Пользователь выбирает раздел меню «Уставщик - Уставы».</p></li>
<li><p>В открывшемся окне Пользователь выбирает действие «Удалить» для одного из элементов в списке Уставов, являющимся Заявкой.</p></li>
<li><p>Для удаления требуется подтверждение действия.</p></li>
<li><p>Заявка удаляется.</p></li>
<li><p>Система возвращает сообщение об успешном завершении процесса.</p></li>
<li><p>В случае каких-либо ошибок, система возвращает сообщение об ошибке.</p></li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="id11">
<h2>Редактирование свойств Устава<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id12">
<h3>Условия<a class="headerlink" href="#id12" title="Ссылка на этот заголовок">¶</a></h3>
<p>Заявка на создание нового Устава должна быть утверждена Администратором системы.</p>
</div>
<div class="section" id="id13">
<h3>Права доступа<a class="headerlink" href="#id13" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика (владельца Устава и включенных в Редакторы Устава) и Администратора.</p>
</div>
<div class="section" id="id14">
<h3>Описание<a class="headerlink" href="#id14" title="Ссылка на этот заголовок">¶</a></h3>
<dl class="simple">
<dt>Для редактирования открыты свойства:</dt><dd><ul class="simple">
<li><p>Наименование</p></li>
<li><p>Язык по умолчанию</p></li>
<li><p>Является ли Шаблоном</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="id15">
<h3>Алгоритм<a class="headerlink" href="#id15" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Изменения сохраняются в БД.</p></li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="id16">
<h2>Настройка графика богослужений<a class="headerlink" href="#id16" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id17">
<h3>Условия<a class="headerlink" href="#id17" title="Ссылка на этот заголовок">¶</a></h3>
<p>Заявка на создание нового Устава должна быть утверждена Администратором системы.</p>
</div>
<div class="section" id="id18">
<h3>Права доступа<a class="headerlink" href="#id18" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика (владельца Устава и включенных в Редакторы Устава) и Администратора.</p>
</div>
<div class="section" id="id19">
<h3>Описание<a class="headerlink" href="#id19" title="Ссылка на этот заголовок">¶</a></h3>
<p>Позволяет настроить условия, по каким дням совершаются богослужения.</p>
<p>Можно настраивать по следующим критериям:</p>
<blockquote>
<div><ol class="arabic">
<li><dl>
<dt><strong>Дни недели</strong> (с понедельника по воскресенье).</dt><dd><div class="admonition important">
<p class="admonition-title">Важно</p>
<p>Если отмечены все дни недели, то служба совершается <strong>ежедневно</strong>.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Знаки службы</strong></dt><dd><p>Указываются Знаки служб, с которыми совершаются богослужения.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Дни Минеи</strong></dt><dd><p>Указываются праздники календарного года, для которых совершаются богослужения.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Дни Триоди</strong></dt><dd><p>Указываются праздники Триоди, для которых совершаются богослужения.</p>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
<p>При формировании расписания на определенную дату система проверяет, входит ли вычисляемый день хотя бы в один из указанных разделов.</p>
<div class="section" id="id20">
<h4>Пример<a class="headerlink" href="#id20" title="Ссылка на этот заголовок">¶</a></h4>
<dl>
<dt>В графике богослужений Устава определено:</dt><dd><ul class="simple">
<li><p>Дни недели</p></li>
</ul>
<p>Суббота, воскресенье</p>
<ul class="simple">
<li><p>Знаки служб</p></li>
</ul>
<p>Бдение, двунадесятые праздники</p>
<ul class="simple">
<li><p>Минея</p></li>
</ul>
<p>Мч. Вонифатия (1 января). Прав. Иоанна Кронштадского ( 2 января).</p>
<ul class="simple">
<li><p>Триодь</p></li>
</ul>
<p>Пасха</p>
</dd>
</dl>
<p>Допустим, система создает расписание на 10 октября 2020 года. Это суббота, поэтому расписание будет сформировано.
Если бы это было не суббота или воскресенье, следовала бы проверка, какой знак службы у этого дня. Если бдение или двунадесятый праздник - расписание будет сформировано.
В противном случае проверялось бы, входит ли данный день (10 февраля) в один из указанных дней Минеи.
Если нет, то проверялось бы, приходится ли данный день на один из дней Триоди, указанных в списке.
Если на все проверки был получен отрицательный ответ, расписание на этот день не формируется.</p>
<p>Для каждого элемента вышеуказанных разделов имеется возможность определить последовательность богослужений.</p>
</div>
</div>
<div class="section" id="id21">
<h3>Валидность данных Устава<a class="headerlink" href="#id21" title="Ссылка на этот заголовок">¶</a></h3>
<p>Устав становится правильно заполненным, когда для любого дня года может быть определена последовательность.
Это осуществляется, если:</p>
<blockquote>
<div><p>1. Для каждого выбранного дня недели определена последовательность.
Этого условия достаточно, чтобы опубликовать Устав.</p>
<dl class="simple">
<dt>Например:</dt><dd><ol class="loweralpha simple">
<li><p>Служба совершается только по воскресеньям и субботам. В этом случае для субботы и воскресенья должны быть определены последовательности.</p></li>
<li><p>Служба совершается каждый день. Для каждого дня недели (с понедельника по воскресенье) должны быть определены последовательности.</p></li>
</ol>
</dd>
</dl>
<p>2. Не для всех дней недели определена последовательность.
В таком случае для всех корневых Знаков службы должна быть определена последовательность. Таким образом будет сохранена целостность данных.</p>
</div></blockquote>
<p><strong>Корневые знаки службы</strong> - это Знаки службы, у которых нет родительского Знака службы.</p>
<div class="figure align-center" id="id39">
<a class="reference internal image-reference" href="_images/rootsign.png"><img alt="Корневой знак службы" src="_images/rootsign.png" style="width: 694.0px; height: 267.0px;" /></a>
<p class="caption"><span class="caption-text">Корневой знак службы</span><a class="headerlink" href="#id39" title="Постоянная ссылка на рисунок">¶</a></p>
</div>
<p>На корневые знаки службы в конечном счете ссылаются все существующие правила Минеи и Триоди, и если для них (корневых знаков службы) будет определена последовательность богослужений, значит для каждого правила Минеи и Триоди будет определена последовательность.</p>
</div>
</div>
<div class="section" id="id22">
<h2>Редактирование переменных Устава<a class="headerlink" href="#id22" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id23">
<h3>Права доступа<a class="headerlink" href="#id23" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика (владельца Устава и включенных в Редакторы Устава) и Администратора.</p>
</div>
<div class="section" id="id24">
<h3>Описание<a class="headerlink" href="#id24" title="Ссылка на этот заголовок">¶</a></h3>
<p>В случае, если Версия Устава не является Шаблоном, то коллекция Переменных Устава открыта для того, чтобы задать им значения. В заголовке закладки должно отображаться количество переменных Устава (при их наличии публикация Устава невозможна).
Если Версия Устава является Шаблоном, то в дополнение к возможности задать значение Перемнной Устава,
Добавляется возможность редактирования описания Переменных Устава.</p>
<p>Например:
Переменная с именем [eveningservice_nosign] будет иметь описание «Время проведения вечернего богослужения для службы без знака».</p>
</div>
<div class="section" id="id25">
<h3>Алгоритмы<a class="headerlink" href="#id25" title="Ссылка на этот заголовок">¶</a></h3>
<div class="section" id="id26">
<h4>Редактирование описания<a class="headerlink" href="#id26" title="Ссылка на этот заголовок">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li><p>Изменения сохраняются в БД.</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="id27">
<h4>Присваивание значения переменной<a class="headerlink" href="#id27" title="Ссылка на этот заголовок">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li><p>Происходит валидация вводимого значения в соответствии с типом Переменной.</p></li>
<li><p>Во всех Правилах из коллекции Ссылок на Правила происходит замена обозначения переменной на ее введенное значение.</p></li>
<li><p>Переменная удаляется.</p></li>
<li><p>Изменения сохраняются в БД.</p></li>
</ol>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="id28">
<h2>Редактирование вложенных коллекций Устава<a class="headerlink" href="#id28" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id29">
<h3>Права доступа<a class="headerlink" href="#id29" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика (владельца Устава и включенных в Редакторы Устава) и Администратора.</p>
</div>
<div class="section" id="id30">
<h3>Описание<a class="headerlink" href="#id30" title="Ссылка на этот заголовок">¶</a></h3>
<p>Редактируется версия черновика Устава, изменения вступают в силу только после публикации Устава.</p>
<dl class="simple">
<dt>Для редактирования открыты свойства:</dt><dd><ul class="simple">
<li><p>Коллекция Знаков служб</p></li>
<li><p>Коллекция Общих правил</p></li>
<li><p>Коллекция Правил Минеи</p></li>
<li><p>Коллекция Правил Триоди</p></li>
<li><p>Коллекция Кафизм</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="id31">
<h3>Алгоритм<a class="headerlink" href="#id31" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Изменение/добавление/удаление сохраняются в БД.</p></li>
<li><dl class="simple">
<dt>В случае изменения Определения Знака службы/Правил производится работа с Переменными Устава:</dt><dd><ol class="loweralpha simple">
<li><p>В новом Определении находятся все указанные имена Переменных Устава</p></li>
<li><p>Полученная коллекция сравнивается и синхронизируется с Коллекцией Переменных Устава, связанных с этим Знаком службы/Правилом.</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>При изменении/добавлении/удалении свойств Устава открывается возможность публикации Устава.</p></li>
<li><p>Вносится запись об изменении Правила в Журнал изменений Версии Устава (не реализовано).</p></li>
<li><p>Производится проверка коллекции Переменных Устава. Все Переменные, на которые не ссылается ни одно Правило, удаляются.</p></li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="id32">
<h2>Изменение списка редакторов Устава<a class="headerlink" href="#id32" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id33">
<h3>Права доступа<a class="headerlink" href="#id33" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика (владельца Устава) и Администратора.</p>
</div>
<div class="section" id="id34">
<h3>Алгоритм<a class="headerlink" href="#id34" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>На странице редактирования Устава Пользователь выбирает закладку «Редакторы». В случае, если Пользователь не является создателем Устава или не «Администратор», закладка недоступна.</p></li>
<li><p>Отображается таблица с именами Пользователей, которые являются Редакторами данного Устава. Напротив каждого имеется кнопка «Исключить», по нажатию на которую Пользователь исключается из Редакторов Устава.</p></li>
<li><p>Внизу таблицы находится поле для ввода. При внесении данных в поле производится поиск Пользователей, с указанным именем или электронной почтой.</p></li>
<li><p>При выборе Пользователя становится доступной кнопка «Добавить», по нажатию на которую Пользователь добавляется в Редакторы Устава.</p></li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="id35">
<h2>Публикация Устава<a class="headerlink" href="#id35" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id36">
<h3>Права доступа<a class="headerlink" href="#id36" title="Ссылка на этот заголовок">¶</a></h3>
<p>Открыто для Уставщика (владельца Устава и включенных в Редакторы Устава) и Администратора.</p>
</div>
<div class="section" id="id37">
<h3>Условия<a class="headerlink" href="#id37" title="Ссылка на этот заголовок">¶</a></h3>
<dl class="simple">
<dt>Должны быть соблюдены все условия:</dt><dd><ol class="arabic simple">
<li><p>Черновик должен находиться в измененном состоянии (хотя бы единожды должна быть произведена операция редактирования свойств, переменных или вложенных коллекций Устава).</p></li>
<li><dl class="simple">
<dt>Если версия Устава указана как <strong>НЕ ШАБЛОН</strong>, то должны быть выполнены условия:</dt><dd><ul class="simple">
<li><p>отсутствовать Переменные Устава.</p></li>
<li><p>Должны быть определены настройки Дней богослужений.</p></li>
</ul>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="id38">
<h3>Алгоритм<a class="headerlink" href="#id38" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Идет обращение к функции Службы Typicon/Publish с указанием данных Пользователя для авторизации.</p></li>
<li><p>Служба возвращает сообщение об успешной инициации процесса.</p></li>
</ol>
</div></blockquote>
<p>В случае каких-либо ошибок, Служба возвращает сообщение об ошибке.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, imT.

    </p>
  </div>
    
    
    
    Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>