Администратор
=============

Рассмотрение Заявки на создание Устава
--------------------------------------

Права доступа
~~~~~~~~~~~~~
Открыто для Администратора

Алгоритм
~~~~~~~~
	1. Пользователь выбирает раздел меню "Уставщик - Уставы".
	2. В открывшемся окне Пользователь выбирает действие "Рассмотреть" для одного из элементов в списке Уставов, со статусом "Ожидает утверждения".
	3. В открывшемся окне доступны для чтения поля Заявки:
		a. Наименование 
		b. Системное имя 
		c. Описание 
		d. Шаблон
		e. Язык по умолчанию
	4. Возможны следующие действия:
		a. Утвердить заявку:
			i. Создается задача на создание новой Сущности Устава с версией в статусе "Черновик", скопированной с Устава-Шаблон
			ii. Заявке на создание Устава назначется статус "В процессе создания"
			iii. Система возвращает сообщение об успешной инициации процесса создания сущности Устава
			iv. По окончании процесса создания сущности Устава удаляется Заявка на создание Устава
		b. Отклонить заявку:
			i. Заявке на создание Устава назначется статус "Отклонена"


Импорт / экспорт 
----------------

Экспорт Устава
~~~~~~~~~~~~~~

Права доступа
"""""""""""""
Открыто для Администратора

Описание
""""""""
Экспортирование Устава (Его выбранной версии) в xml-файл, который загружается пользователю.

Алгоритм
""""""""

1. В окне списка Уставов в таблице для каждого Устава есть кнопка "Экспортировать".
2. По нажатии на кнопку появляется модальное окно, в котором можно выбрать из списка Версию Устава. Отображаются все версии, например:
	* 1 (Архив - date)
	* 2 (Архив - date)
	* 3 (Опубликована - date)
	* 4 (Черновик - date)
	
	где date - дата Создания Версии Устава (CDate)
3. Нажимая кнопку Экспортировать запускается алгоритм экспортирования Устава, включающего его выбранную Версию.
4. По успешном окончании пользователю загружается xml-файл с сериализованным Уставом, имеющем одну (выбранную) Версию Устава.
	
	
Импорт Устава
~~~~~~~~~~~~~

Права доступа
"""""""""""""
Открыто для Администратора

Описание
""""""""
Импортирование Устава (Его выбранной версии) из xml-файл, который загружается пользователем.

Алгоритм
""""""""
1. В окне списка Уставов имеется кнопка "Импортировать".
2. По нажатии на кнопку появляется модальное окно, в котором можно выбрать xml-файл для загрузки на сервер.
3. Нажимая кнопку "Импортировать" запускается загрузка файла на сервер и далее выполняется алгоритм импортирования Устава с одной Версией Устава, который выставляется в статус Черновик.
4. Создателем Устава является текущий Пользователь.
5. Редакторы Устава НЕ импортируются из xml-файла.
6. По успешном окончании и сохрании Устава в БД пользователю становится доступен данный Устав.


Экспорт текстов
~~~~~~~~~~~~~~~

Права доступа
"""""""""""""
Открыто для Администратора

Описание
"""""""""""""
Экспортирование богослужебных текстов (только Минея и Триодь) в отдельный xml-файл с сохранением Id.
Выгружаемый файл будет использоваться при начальном заполнении БД. 
Экспортируемые Уставы ссылаются на богослужебные тексты Минеи и Триоди через Id, жестко заданный. Поэтому необходимо выгружать в xml тексты.
Выгружаются все, кроме определения последовательности.

Алгоритм
""""""""
1. В главном меню раздела Администратор имеется подраздел "Импорт/экспорт".
2. По нажатии открывается станица, где располагаются две кнопки:
	#. "Импортировать"
	#. "Экспортировать"
3. По нажатии на "Экспортировать", запускается алгоритм экспортирования текстов.
4. По успешном окончании пользователю загружается xml-файл с сериализованными текстами Минеи и Триоди.
